<?php

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 * Description of Collection
 * @package /
 * @author bryyce
 */
class Collection implements ArrayAccess,  Iterator {
	private $collection = array();
	private $current_index = 0;
	
	public function __construct(array $array = array()) {
		$this->collection = $array;
	}
		
	public function push($element){
		$this->collection[] = $element;
	}
	
	public function pop(){
		return array_pop($this->collection);
	}
	
	public function first(){
		return $this->collection[0];
	}
	
	public function last(){
		return $this->collection[$this->count() - 1];
	}
	
	public function count(){
		return count($this->collection);
	}

	public function __invoke($num){
		if(is_int($num))
			return $this->collection[$num];
		else return null;
	}

	/*public function next(){
		$this->current_index ++;
		if($this->current_index > $this->count())
			return null;
		return $this->collection[$this->current_index - 1];		
	}*/

	public function prev(){
		$this->current_index --;
		if($this->current_index < 0)
			return null;
		return $this->collection[$this->current_index];
	}

	public function join(array $array){
		return $this->collection = array_merge($this->collection, $array);
	}
	
	public function reset(){
		$this->current_index = 0;
	}
	
	public function remove($element){
		foreach($this->collection as $key => $value)
			if($value === $element){
				unset($this->collection[$key]);
				break;
			}
		$this->collection = array_values($this->collection);
	}
	
	public function __destruct() {
		unset($this->collection);
	}

	public function offsetGet( $offset ){
		echo'l';
		return $this->collection[$offset];
	}
	
	public function offsetExists($offset) {
		echo'm';
		return array_key_exists($offset, $this->collection);
	}

	public function offsetSet($offset, $value) {
		$this->collection[$offset] = $value;
	}

	public function offsetUnset($offset) {
		unset($this->collection[$offset]);
		
	}

	public function rewind()
    {
        echo "rewinding\n";
        reset($this->var);
    }
  
    public function current()
    {
        $var = current($this->var);
        echo "current: $var\n";
        return $var;
    }
  
    public function key() 
    {
        $var = key($this->var);
        echo "key: $var\n";
        return $var;
    }
  
    public function next() 
    {
        $var = next($this->var);
        echo "next: $var\n";
        return $var;
    }
  
    public function valid()
    {
        $key = key($this->var);
        $var = ($key !== NULL && $key !== FALSE);
        echo "valid: $var\n";
        return $var;
    }
}
?>